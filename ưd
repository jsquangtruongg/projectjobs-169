import { useState } from "react";
import styles from "./style.module.css";
import logo from "../../../assets/imgs/logo.png";
import imgPost from "../../../assets/imgs/Rectangle25.png";
import avatarPost from "../../../assets/imgs/avatar.jpg";

import SearchIcon from "@mui/icons-material/Search";
import MailOutlinedIcon from "@mui/icons-material/MailOutlined";
import { useNavigate } from "react-router-dom";

interface BlogPost {
  imgPost: string;
  title: string;
  content: string;
  author: string;
  date: string;
}

export const Blog = () => {
  const [searchTerm, setSearchTerm] = useState<string>("");
  const [filterBlogs, setFilterBlogs] = useState<BlogPost[]>(blogs); // Khởi tạo với tất cả các bài viết
  const blogs: BlogPost[] = [
    {
      imgPost: imgPost,
      title: "Technology",
      content:
        "Những công nghệ hot nhất hiện nay trong lĩnh vực IT lương lên đến 10.000$",
      author: "Quang Trường",
      date: "25 August 2024",
    },
    {
      imgPost: imgPost,
      title: "Technology",
      content: "Những đổi mới",
      author: "Quang Trường",
      date: "25 August 2024",
    },
  ];

  const navigate = useNavigate();

  const handleReadBlogClick = () => {
    navigate("/ReadBlogPage");
  };

  // Hàm tìm kiếm
  const handleSearch = () => {
    const filtered = blogs.filter(
      (blog: BlogPost) =>
        blog.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        blog.content.toLowerCase().includes(searchTerm.toLowerCase()) ||
        blog.author.toLowerCase().includes(searchTerm.toLowerCase())
    );
    setFilterBlogs(filtered);
  };

  return (
    <div className={styles.heading_post}>
      <div className={styles.from_heading_post}>
        <div className={styles.from_heading_padding}>
          <div className={styles.from_background}>
            <div className={styles.background_poster}></div>
          </div>
          <div className={styles.from_search}>
            <div className={styles.from_search_input}>
              <input
                type="text"
                placeholder="Search"
                className={styles.input_search}
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
              <SearchIcon 
                className={styles.search_icon} 
                onClick={handleSearch} 
                style={{ cursor: 'pointer' }} 
              />
            </div>
          </div>
          <p className={styles.text_new_post}>Bài Đăng Mới Nhất</p>
          <div className={styles.heading_body}>
            <div className={styles.from_blog_main}>
              {filterBlogs.map((blog: BlogPost, index: number) => (
                <div
                  className={styles.form_item_blog}
                  onClick={handleReadBlogClick}
                  key={index}
                >
                  <div>
                    <img
                      src={imgPost}
                      alt=""
                      className={styles.img_class_post}
                    />
                  </div>
                  <div className={styles.item_click}>{blog.title}</div>
                  <p className={styles.text_blog_hot}>{blog.content}</p>
                  <div className={styles.item_information}>
                    <div className={styles.from_style_contact}>
                      <img
                        src={avatarPost}
                        alt=""
                        className={styles.img_poster}
                      />
                      <div className={styles.text_name_member}>
                        {blog.author}
                      </div>
                    </div>
                    <p className={styles.text_date}>{blog.date}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
          <div className={styles.form_btn_click}>
            <div className={styles.btn_click_post}>Tất cả bài viết</div>
          </div>
        </div>

        {/* Phần thông tin khác */}
      </div>
    </div>
  );
};
